# Technische Umsetzung

## Implementierung

### Aufbau

Das Programm ist modular aufgebaut und besteht grundlegend aus folgenden Modulen (intern):

- Hauptmodul (Paket: `main.*`, Wichtigste Klassen: `MainClass`, `ComponentHub`)
- Hilfs-Klassen (Paket: `utils.*`)
- Model (Paket: `model.*`, Wichtigste Klassen: `Project`, `Node`)
- Projektausführung (Paket: `projectrunner.*`, Wichtigste Klassen:  `ProjectRunner`, `ProjectExecution`)
- Kommandozeile (Paket: `commandline.*`, Wichtigste Klasse: `CommandLinePrompt`)
- Grafische Benutzeroberfläche (Paket: `view.*`, Wichtigste Klasse: `MainWindow`)
- Persistente Einstellungen (Paket: `settings.*`, Wichtigste Klasse: `Settings`, `GeneralSettings`)
- Protokollierung (Paket: `logging.*`, Wichtigste Klassen: `AdvancedLogger`, `AdditionalLogger`)
- Über Reflexion geladene Klassen und geteilte Klassen/Schnittstellen (Paket: `reflection.*`, Wichtigste Klasse: `NodeDefinition`)

Der folgende Aufbau soll einen Überblick darüber verschaffen wie die Klassen der einzelnen Module zusammen arbeiten:

![](Grafiken/Technische-Umsetzung/Aufbau.pdf)

Im folgenden werde ich auf die einzelnen Module eingehen und beschreiben welche Tätigkeit diese erfüllen und wie diese funktionieren.

### Hauptmodul

#### MainClass

Das Hauptmodul hat die Aufgabe die Anwendung zu starten und alle nötigen Komponenten zu laden. Je nachdem ob Konsole, Grafischen Benutzerinterface oder Beides gestartet werden soll, werden die verschiedenen Module geladen.

#### ComponentHub

Die Klasse ComponentHub stellt das Drehkreuz über welches das grafische Benutzerinterface, die Kommandozeile und das Model kommunizieren.
Zugriff auf den ComponentHub erfolgt über ein Singleton und ist theoretisch aus dem gesamten Programm möglich. Der ComponentHub kann jeweils eine Instanz auf ein `Project`-Objekt, ein `CommandLinePrompt`-Objekt und ein `MainWindow`-Objekt halten. Ist die Kommandozeile oder das grafische Benutzerinterface nicht aktiv so bleibt dieses Attribut *null*.

### Hilfs-Klassen

Eine ganze Reihe nützliche Hilfsklassen sind in dem Paket `utils.*` zusammengefasst. Die hier befindlichen Hilfs-Methoden, Hilfs-Strukturen werden durchgängig durch das Programm an den verschiedensten Stellen verwendet und sollen den restlichen Code übersichtlicher und lesbarer machen sowie Redundanz und die damit verbundene Fehleranfälligkeit vermeiden.

### Model

Das Model ist grundlegend wie folgt aufgebaut:

![](Grafiken/Technische-Umsetzung/Aufbau-Model.pdf)

Klasse | Enthält (gekürzt) | Beschreibung
:-- | :-- | :--
`Project` | Elemente (Liste von `Node`-Objekten), Verweise auf projektspezifische Verzeichnisse und Dateien, Projekteinstellungen (`ProjectSettings`) | Repräsentiert ein bestimmtes vom Benutzer erstelltes Projekt.
`Node`| Eingänge (Liste von `Inlet`-Objekten), Ausgänge (Liste von `Outlet`-Objekten), Position (X- und Y-Koordinate), Identifikation (`long`), Zugehörige Element-Definition (`NodeDefinition`) | Repräsentiert ein in einem Projekt platziertes Element.
`Inlet` | Verbundene Ausgänge (Liste von `Outlet`-Objekten), Identifikation (`long`), Zugehöriges Element (`Node`), Index (`int`) | Repräsentiert ein zu einem Element zugehörigen Eingang.
`Outlet` | Verbundene Eingänge (Liste von `Inlet`-Objekten), Identifikation (`long`), Zugehöriges Element (`Node`), Index (`int`) | Repräsentiert ein zu einem Element zugehörigen Eingang.

Zu beachten ist dass die Klasse `Node` selbst keine Informationen über Namen, Icons oder Typen der Ein und Ausgänge enthält. Informationen über diese sind nicht im Model sondern in den über Reflexion geladenen Element-Definitionen (`NodeDefinition`) enthalten.

#### Serialisierung und Deserialisierung von Projekten

Um Projekte persistent zu speichern müssen diese Serialisiert werden



sdfsdfsdfdsfsdf um inpompartibilitäten zu vermeiden json etc. ....




### Entstandener Umfang an Codezeilen

[*CLOC*](http://cloc.sourceforge.net/) Ausgabe:

```
$ cloc ~/GitHub/Bachelor-Projekt/Quellcode\ Hauptprogramm/src

     522 text files.
     522 unique files.                                          
      14 files ignored.

github.com/AlDanial/cloc v 1.72  T=2.60 s (195.3 files/s, 20961.3 lines/s)
-------------------------------------------------------------------------------
Language                     files          blank        comment           code
-------------------------------------------------------------------------------
Java                           508           8484           2101          43946
-------------------------------------------------------------------------------
SUM:                           508           8484           2101          43946
-------------------------------------------------------------------------------
```

Das reine Hauptprogramm umfasst 508 Java-Dateien organisiert in 113 Paketen. Summiert sind in diesen 43946 Zeilen Java-Code enthalten (leere Zeilen und Kommentare ausgeschlossen). Es sind keine fremden Dateien mit Ausnahme der Datei Gauss.java welche ich (mit Erlaubnis) aus den Unterlagen der Vorlesung *Computergrafik* von Prof. Dr. F.N. Rudolph entnommen habe.



### Implementierungsdetails einzelne Module
### Verwendete Bibliotheken
## Verwendete und erstellte Grafiken
## Hilfstool *Templategenerator*